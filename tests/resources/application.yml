environment: test

orchestration:
  path:
    delimiter: /

instrument:
  name: SNAP
  home: /SNS/SNAP/
  calibration:
    home: ${instrument.home}shared/Calibration
    sample:
      home: ${instrument.calibration.home}/CalibrantSamples
      extensions:
        - json
    powder:
      home: ${instrument.calibration.home}/Powder
      grouping:
        home: ${instrument.calibration.powder.home}/PixelGroupingDefinitions
        extensions:
          - xml
          - nxs
          - hdf
  config: ${instrument.calibration.home}/SNAPInstPrm.json
  native:
    pixelResolution: 1179648
    definition:
      file: ${instrument.home}shared/Malcolm/dataFiles/SNAP_Definition.xml
  lite:
    pixelResolution: 18432
    definition:
      file: ${instrument.calibration.home}/Powder/SNAPLite.xml
    map:
      file: ${instrument.calibration.home}/Powder/LiteGroupMap.hdf

nexus:
  lite:
    prefix: shared/lite/SNAP_
    extension: .lite.nxs.h5
  native:
    prefix: nexus/SNAP_
    extension: .nxs.h5
  home: nexus/
  file:
    extension: .nxs.h5
    prefix: SNAP_

grouping:
  filename:
    prefix: SNAPFocGroup_
    lite:
      extension: .lite.nxs
    native:
      extension: .xml
  workspacename:
    lite: SNAPLite_grouping_
    native: SNAP_grouping_


calibration:
  file:
    extension: .json
    prefix: SNAPcalibLog
  reduction:
    output:
      extension: .nxs
      format: "{}_calibration_reduction_result"
  diffraction:
    convergenceThreshold: 0.5
    peakIntensityThreshold: 0.05
    nBinsAcrossPeakWidth: 10
    maximumIterations: 5
    maximumOffset: 10
  parameters:
    default:
      # degrees
      groupSliceValue: 5
      alpha: 1.1
      beta:
        - 1
        - 2
      FWHMMultiplier:
        - -2
        - 2
      peakTailCoefficient: 2.0

mantid:
    workspace:
      nameTemplate:
        delimiter: "_"
        run: "{unit},{group},{lite},{runNumber},{auxilary}"
        diffCal:
          input: "_{unit},{runNumber},raw"
          table: "_DIFC,{runNumber}"
        units:
          dSpacing: dsp
          timeOfFlight: tof
        groups:
          unfocussed: unfoc
          all: all
          column: column
          bank: bank

localdataservice:
  config:
    verifypaths: true

logging:
  level: 40
  SNAP:
    format: '%(asctime)s - %(levelname)-8s - %(name)s - %(message)s'
  mantid:
    format: '%Y-%m-%d %H:%M:%S,%i - %p - %s - %t'

samples:
  home: ${instrument.calibration.home}/CalibrantSamples


test:
  config:
    name: test
    home: /some/path
  persistence:
    read: ${test.config.home}
    write: ~/${test.config.home}
  data:
    home: ${test.persistence}/data/${test.config.name}

cis_mode: true
